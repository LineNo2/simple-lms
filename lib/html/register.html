<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>simple lms</title>
  <script>
	function submitForm(event) {
  event.preventDefault(); // 폼 제출 막기

  const form = document.getElementById('register-form');
  const data = {
    id: form.id.value,
    pw: form.pw.value,
	name: form.name.value,
    univId: form.univ_id.value,
    isPf: form.is_pf.value
  };
  const xhr = new XMLHttpRequest();
  xhr.open('POST', '/register');
  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.onload = function() {
    if (xhr.status === 200) {
      alert(xhr.responseText);
      window.location.href = '/';
    } else {
      alert(xhr.responseText);
    }
  };
  xhr.send(JSON.stringify(data));
}
  </script>
</head>
<body>
<h1>회원가입</h1>
	<form action="/register" method="POST" onsubmit="submitForm(event)" id="register-form">
		<label for="id">아이디:</label>
		<input type="text" id="id" name="id" required><br>

		<label for="pw">비밀번호:</label>
		<input type="password" id="pw" name="pw" required><br>

		<label for="name">이름:</label>
		<input type="text" id="name" name="name" required><br>

		<label for="univ_id">학번:</label>
		<input type="number" id="univ_id" name="univ_id" required><br>

		<label for="is_pf">교수/학생:</label>
		<select id="is_pf" name="is_pf" required>
			<option value="">선택하세요</option>
			<option value="1">교수</option>
			<option value="0">학생</option>
		</select><br>

		<button type="submit">회원가입</button>
	</form>
</body>
</html>
